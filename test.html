<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mortgage Comparison Test</title>
</head>
<body>
    <h1>Mortgage Comparison Test</h1>
    <!-- You can add some HTML here to input or display data if you want -->

    <script src="mortgageComparison.js">

        const existingMortgage = '{"ltv":0.7985,"fees":[],"rate":{"netRate":6.34},"dealId":33852907,"statusDd":"Approved","rateClass":"N","loanTypeDd":"Mortgage","mortgageId":"64417258","statusDate":"2022-08-26T16:38:54-04:00","borrowerIds":[],"cashBackAmt":0,"commissions":[],"insuredFlag":"N","qualifyRate":8.34,"maturityDate":"2027-09-02T00:00:00-04:00","miPremiumPst":0,"netLoanAmount":487511,"paymentTermDd":"Closed","qualifyDetail":{"qualifyDetailId":40029409,"amortizationTerm":360,"interestCompoundDd":"Semi Annually"},"qualifyingGds":0.30383,"qualifyingTds":0.52888,"requestedRate":6.34,"combinedIncome":87151.167241,"interestTypeDd":"Fixed","mortgageTypeDd":"First","miPremiumAmount":0,"totalLoanAmount":487511,"amortizationTerm":360,"balanceRemaining":455071.69,"firstPaymentDate":"2022-10-02T00:00:00-04:00","marketSubmission":"N","actualPaymentTerm":60,"mtgInsIncludeFlag":null,"PAndIPaymentAmount":3004.18,"interestCompoundDd":"Semi Annually","paymentFrequencyDd":"Monthly","existingMortgageFlag":"N","effectiveAmortization":360,"interestAdjustmentDate":"2022-09-02T00:00:00-04:00","singleProgressiveTypeDd":"No","interestAdjustmentAmount":null,"PAndIPaymentAmountMonthly":3004.18,"PAndIPaymentAmountQualify":3644.93}';
        const marketRates = '"[{""Term"":""1 YR"",""Rate"":0.0759,""Lender"":""TD Posted Rate National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":1,""type"":""Fixed""},{""Term"":""2 YR"",""Rate"":0.0714,""Lender"":""TD Posted Rate National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":2,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":0.0694,""Lender"":""TD Posted Rate National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":0.0679,""Lender"":""TD Posted Rate National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":0.0684,""Lender"":""TD Posted Rate National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""5 YR VRM"",""Rate"":3,""Lender"":""TD Posted Rate National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Variable""},{""Term"":""3 YR"",""Rate"":5.94,""Lender"":""ATB AB"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.69,""Lender"":""ATB AB"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":5.99,""Lender"":""B2B National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.79,""Lender"":""B2B National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.49,""Lender"":""B2B National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.49,""Lender"":""BlueShore BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.19,""Lender"":""CMLS National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.84,""Lender"":""CMLS National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""CMLS National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.49,""Lender"":""Coast Capital BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.69,""Lender"":""Duca ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":6.24,""Lender"":""Equitable National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.59,""Lender"":""Equitable National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""First National National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.24,""Lender"":""FirstOntario ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.74,""Lender"":""FirstOntario ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.59,""Lender"":""FirstOntario ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""2 YR"",""Rate"":6.14,""Lender"":""First West BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":2,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.54,""Lender"":""First West BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.39,""Lender"":""First West BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""Home Trust National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""2 YR"",""Rate"":6.14,""Lender"":""ICICI BC/AB/PR/ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":2,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.14,""Lender"":""ICICI BC/AB/PR/ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.99,""Lender"":""ICICI BC/AB/PR/ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.69,""Lender"":""ICICI BC/AB/PR/ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.24,""Lender"":""Manulife National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.54,""Lender"":""Manulife National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.19,""Lender"":""Marathon BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.99,""Lender"":""Marathon BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""Marathon BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":5.94,""Lender"":""MCAN BC/AB/PR/ON/NS/NL/PE"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.59,""Lender"":""MCAN BC/AB/PR/ON/NS/NL/PE"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.19,""Lender"":""MCAP National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.69,""Lender"":""MCAP National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""MCAP National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""Meridian ON"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.19,""Lender"":""Merix National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.69,""Lender"":""Merix National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""Merix National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""2 YR"",""Rate"":6.24,""Lender"":""Prospera BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":2,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.64,""Lender"":""Prospera BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.49,""Lender"":""Prospera BC"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":5.94,""Lender"":""Radius BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.74,""Lender"":""Radius BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.49,""Lender"":""Radius BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.69,""Lender"":""RFA BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.54,""Lender"":""RFA BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""3 YR"",""Rate"":6.19,""Lender"":""RMG National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":3,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":5.74,""Lender"":""RMG National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""RMG National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":6.24,""Lender"":""Scotiabank National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":6.19,""Lender"":""Scotiabank National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":6.19,""Lender"":""Servus AB"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.74,""Lender"":""Servus AB"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":6.24,""Lender"":""Strive BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.64,""Lender"":""Strive BC/AB/PR/ON/AT"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""},{""Term"":""4 YR"",""Rate"":6.29,""Lender"":""TD Bank National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":4,""type"":""Fixed""},{""Term"":""5 YR"",""Rate"":5.74,""Lender"":""TD Bank National"",""RateType"":""Insured"",""ratioLimits"":{""Lender"":""Default"",""RateType"":""Insured"",""gds"":39,""tds"":44,""ltv"":95},""termYears"":5,""type"":""Fixed""}]";'
        const marketPrime = 3.5;

        // Run the function with the test data
        const result = mortgageComparison(existingMortgage, marketRates, marketPrime, marketRateLender = marketPrime);

        // Output the result to the console or to the web page
        console.log(result);
        // Alternatively, display the result on the web page
        document.body.innerHTML += `<pre>${JSON.stringify(result, null, 2)}</pre>`;
    

        
    </script>
</body>
</html>
